<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Smile Hub - Register</title>
<link rel="icon" type="image/x-icon" href="./ico2.png" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<style>
  /* Same styles as login page */
  :root {
    --primary-color: #000000;
    --secondary-color: #ffffff;
    --accent-color: #6c757d;
    --dark-bg: #0a0c10;
    --darker-bg: #151922;
    --card-bg: rgba(255, 255, 255, 0.08);
    --text-primary: #ffffff;
    --text-secondary: rgba(255, 255, 255, 0.8);
    --text-muted: rgba(255, 255, 255, 0.6);
    --border-color: rgba(255, 255, 255, 0.1);
    --gradient-bg: linear-gradient(135deg, var(--dark-bg) 0%, var(--darker-bg) 50%, #1a1f2e 100%);
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html, body {
    height: 100%;
    font-family: 'Poppins', sans-serif;
  }

  body {
    background: var(--gradient-bg);
    background-attachment: fixed;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 2rem 0;
  }

  .register-container {
    background: var(--card-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--border-color);
    border-radius: 20px;
    padding: 3rem;
    width: 100%;
    max-width: 450px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  }

  .register-header {
    text-align: center;
    margin-bottom: 2rem;
  }

  .register-header h2 {
    color: var(--text-primary);
    font-weight: 700;
    margin-bottom: 0.5rem;
  }

  .register-header p {
    color: var(--text-secondary);
    font-size: 0.9rem;
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-label {
    color: var(--text-primary);
    font-weight: 600;
    margin-bottom: 0.5rem;
    display: block;
  }

  .form-control {
    background: rgba(10, 12, 16, 0.8);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
    padding: 12px 16px;
    border-radius: 10px;
    transition: all 0.3s ease;
    width: 100%;
  }

  .form-control:focus {
    background: rgba(10, 12, 16, 0.9);
    border-color: var(--secondary-color);
    color: var(--text-primary);
    box-shadow: 0 0 0 0.2rem rgba(255, 255, 255, 0.25);
    outline: none;
  }

  .form-control::placeholder {
    color: var(--text-muted);
  }

  .btn-register {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%);
    border: 2px solid var(--secondary-color);
    color: var(--secondary-color);
    font-weight: 600;
    padding: 12px 30px;
    border-radius: 50px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    transition: all 0.4s ease;
    width: 100%;
    position: relative;
    overflow: hidden;
  }

  .btn-register::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: var(--secondary-color);
    transition: all 0.6s ease;
    z-index: -1;
  }

  .btn-register:hover::before {
    left: 0;
  }

  .btn-register:hover {
    color: var(--primary-color);
    border-color: var(--secondary-color);
  }

  .register-footer {
    text-align: center;
    margin-top: 2rem;
  }

  .register-footer a {
    color: var(--text-secondary);
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .register-footer a:hover {
    color: var(--text-primary);
  }

  .alert {
    padding: 12px 16px;
    margin-bottom: 1rem;
    border-radius: 10px;
    border: 1px solid;
  }

  .alert-danger {
    background: rgba(220, 53, 69, 0.1);
    color: #ff6b6b;
    border-color: rgba(220, 53, 69, 0.3);
  }

  .alert-success {
    background: rgba(40, 167, 69, 0.1);
    color: #51cf66;
    border-color: rgba(40, 167, 69, 0.3);
  }

  @media (max-width: 576px) {
    .register-container {
      padding: 2rem 1.5rem;
      margin: 1rem;
    }
  }
</style>
</head>
<body>

<div class="register-container">
  <div class="register-header">
    <h2><i class="fas fa-user-plus me-2"></i>Join Smile Hub</h2>
    <p>Create your account to manage patients</p>
  </div>

  <div id="alertContainer"></div>

  <form id="registerForm">
    <div class="form-group">
      <label class="form-label">Full Name</label>
      <input type="text" class="form-control" id="fullName" name="fullName" placeholder="Enter your full name" required>
    </div>

    <div class="form-group">
      <label class="form-label">Username</label>
      <input type="text" class="form-control" id="username" name="username" placeholder="Choose a username" required>
    </div>

    <div class="form-group">
      <label class="form-label">Email</label>
      <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email address">
    </div>

    <div class="form-group">
      <label class="form-label">Password</label>
      <input type="password" class="form-control" id="password" name="password" placeholder="Create a password" required minlength="6">
    </div>

    <div class="form-group">
      <label class="form-label">Confirm Password</label>
      <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" placeholder="Confirm your password" required>
    </div>

    <button type="submit" class="btn btn-register">
      <i class="fas fa-user-plus me-2"></i>Create Account
    </button>
  </form>

  <div class="register-footer">
    <p><a href="login.html">Already have an account? Sign in</a></p>
    <p><a href="home.html">Back to Home</a></p>
  </div>
</div>

<script>
document.getElementById('registerForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  
  const fullName = document.getElementById('fullName').value;
  const username = document.getElementById('username').value;
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;
  const confirmPassword = document.getElementById('confirmPassword').value;
  
  if (password !== confirmPassword) {
    showAlert('Passwords do not match!', 'danger');
    return;
  }

  if (password.length < 6) {
    showAlert('Password must be at least 6 characters long!', 'danger');
    return;
  }
  
  try {
    const response = await fetch('/auth/register', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ username, password, email, fullName }),
    });

    if (response.ok) {
      const result = await response.json();
      showAlert('Account created successfully! Redirecting to login...', 'success');
      setTimeout(() => {
        window.location.href = '/login.html';
      }, 2000);
    } else {
      const error = await response.json();
      showAlert(error.error || 'Registration failed. Please try again.', 'danger');
    }
  } catch (error) {
    showAlert('Connection error. Please try again.', 'danger');
  }
});

function showAlert(message, type) {
  const alertContainer = document.getElementById('alertContainer');
  alertContainer.innerHTML = `
    <div class="alert alert-${type}">
      <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'} me-2"></i>
      ${message}
    </div>
  `;
  
  setTimeout(() => {
    alertContainer.innerHTML = '';
  }, 5000);
}
</script>

</body>
</html>
